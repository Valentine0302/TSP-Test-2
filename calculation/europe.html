<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расчет стоимости перевозок по Европе - TSP Transport OÜ</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/button-styles.css">
    <link rel="stylesheet" href="../css/calculation.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Шапка сайта -->
    <header>
        <div class="header-top">
            <div class="container">
                <div class="contact-info">
                    <a href="mailto:transport@tspgrupp.ee"><i class="fas fa-envelope"></i> transport@tspgrupp.ee</a>
                    <a href="tel:+37266644400"><i class="fas fa-phone"></i> +372 666 4400</a>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="header-main">
                <div class="logo">
                    <a href="../index.html">
                        <img src="../images/optimized/logo.png" alt="TSP Transport OÜ Logo">
                    </a>
                </div>
                <div class="mobile-menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
                <nav>
                    <ul>
                        <li><a href="../index.html#home">Главная</a></li>
                        <li><a href="../index.html#about">О компании</a></li>
                        <li><a href="../index.html#services">Услуги</a></li>
                        <li><a href="../index.html#advantages">Преимущества</a></li>
                        <li><a href="../index.html#contact">Контакты</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Основной контент -->
    <section class="calculation-section">
        <div class="container">
            <div class="section-title">
                <h1>Расчет стоимости перевозок по Европе</h1>
                <p>Заполните форму ниже для получения предварительного расчета стоимости перевозки</p>
            </div>
            
            <div class="calculation-form-container">
                <form class="calculation-form" id="europeForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="origin">Пункт отправления</label>
                            <input type="text" id="origin" name="origin" required placeholder="Например: Таллинн, Эстония">
                        </div>
                        <div class="form-group">
                            <label for="destination">Пункт назначения</label>
                            <input type="text" id="destination" name="destination" required placeholder="Например: Берлин, Германия">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="cargoType">Тип груза</label>
                            <select id="cargoType" name="cargoType" required>
                                <option value="" disabled selected>Выберите тип груза</option>
                                <option value="general">Генеральный груз</option>
                                <option value="bulk">Сыпучий груз</option>
                                <option value="oversized">Негабаритный груз</option>
                                <option value="dangerous">Опасный груз</option>
                                <option value="temperature">Температурный режим</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="vehicleType">Тип транспортного средства</label>
                            <select id="vehicleType" name="vehicleType" required>
                                <option value="" disabled selected>Выберите тип ТС</option>
                                <option value="van">Малотоннажный фургон</option>
                                <option value="truck">Грузовик 10-15т</option>
                                <option value="tractor">Тягач с полуприцепом</option>
                                <option value="refrigerator">Рефрижератор</option>
                                <option value="special">Спецтехника</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="weight">Вес груза (кг)</label>
                            <input type="number" id="weight" name="weight" required min="1" placeholder="Например: 5000">
                        </div>
                        <div class="form-group">
                            <label for="volume">Объем груза (м³)</label>
                            <input type="number" id="volume" name="volume" required min="0.1" step="0.1" placeholder="Например: 30">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="loadType">Тип загрузки</label>
                            <select id="loadType" name="loadType" required>
                                <option value="" disabled selected>Выберите тип загрузки</option>
                                <option value="ftl">FTL (полная загрузка)</option>
                                <option value="ltl">LTL (частичная загрузка)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="deliveryDate">Желаемая дата доставки</label>
                            <input type="date" id="deliveryDate" name="deliveryDate">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customs">Таможенное оформление</label>
                            <select id="customs" name="customs">
                                <option value="no">Не требуется</option>
                                <option value="export">Экспорт</option>
                                <option value="import">Импорт</option>
                                <option value="transit">Транзит</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="insurance">Страхование груза</label>
                            <select id="insurance" name="insurance">
                                <option value="no">Не требуется</option>
                                <option value="basic">Базовое</option>
                                <option value="full">Полное</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="additionalInfo">Дополнительная информация</label>
                        <textarea id="additionalInfo" name="additionalInfo" rows="4" placeholder="Укажите любую дополнительную информацию, которая может быть важна для расчета"></textarea>
                    </div>
                    
                    <div class="form-row contact-info-row">
                        <h3>Контактная информация</h3>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Имя</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="company">Компания</label>
                            <input type="text" id="company" name="company">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Телефон</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                    </div>
                    
                    <div class="form-submit">
                        <button type="submit" class="btn btn-submit">Рассчитать стоимость</button>
                    </div>
                </form>
                
                <div class="calculation-result" id="calculationResult" style="display: none;">
                    <h3>Результаты расчета</h3>
                    <div class="result-content">
                        <p>Предварительная стоимость перевозки: <span id="estimatedCost">0</span> EUR</p>
                        <p>Ориентировочное время доставки: <span id="estimatedTime">0</span> дней</p>
                        <p>Примечание: Данный расчет является предварительным. Для получения точной стоимости наш менеджер свяжется с вами в ближайшее время.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Футер -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>TSP Transport OÜ</h3>
                    <p>Компания специализируется на грузоперевозках по автодорогам, включая перевозку сыпучих грузов. Наша цель - предоставление высококачественных логистических услуг.</p>
                </div>
                <div class="footer-column">
                    <h3>Навигация</h3>
                    <ul class="footer-links">
                        <li><a href="../index.html#home">Главная</a></li>
                        <li><a href="../index.html#about">О компании</a></li>
                        <li><a href="../index.html#services">Услуги</a></li>
                        <li><a href="../index.html#advantages">Преимущества</a></li>
                        <li><a href="../index.html#contact">Контакты</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Контакты</h3>
                    <ul class="footer-contact-info">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Harju maakond, Tallinn, Lasnamäe linnaosa, Lasnamäe tn 20-17, 11416</span>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <span>transport@tspgrupp.ee</span>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <span>+372 666 4400</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 TSP Transport OÜ. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <script>
        // Простой скрипт для мобильного меню
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
            const nav = document.querySelector('nav');
            
            mobileMenuToggle.addEventListener('click', function() {
                nav.classList.toggle('active');
            });
            
            // Закрытие меню при клике на ссылку
            const navLinks = document.querySelectorAll('nav ul li a');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    nav.classList.remove('active');
                });
            });
            
            // Обработка отправки формы
            const calculationForm = document.getElementById('europeForm');
            const calculationResult = document.getElementById('calculationResult');
            const estimatedCost = document.getElementById('estimatedCost');
            const estimatedTime = document.getElementById('estimatedTime');
            
            calculationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Имитация расчета (в реальном проекте здесь будет API-запрос)
                const weight = parseFloat(document.getElementById('weight').value);
                const volume = parseFloat(document.getElementById('volume').value);
                const vehicleType = document.getElementById('vehicleType').value;
                const distance = estimateDistance(
                    document.getElementById('origin').value,
                    document.getElementById('destination').value
                );
                
                // Простая формула для демонстрации
                let cost = weight * 0.3 + volume * 8 + distance * 0.8;
                let time = Math.ceil(distance / 500); // Примерно 500 км в день
                
                switch(vehicleType) {
                    case 'van':
                        cost *= 0.8;
                        time += 1;
                        break;
                    case 'truck':
                        cost *= 1.0;
                        time += 0;
                        break;
                    case 'tractor':
                        cost *= 1.2;
                        time += 0;
                        break;
                    case 'refrigerator':
                        cost *= 1.5;
                        time += 0;
                        break;
                    case 'special':
                        cost *= 2.0;
                        time += 2;
                        break;
                    default:
                        cost *= 1.0;
                        time += 1;
                }
                
                // Дополнительные услуги
                if (document.getElementById('customs').value !== 'no') {
                    cost += 150;
                    time += 1;
                }
                
                if (document.getElementById('insurance').value === 'basic') {
                    cost += 50;
                } else if (document.getElementById('insurance').value === 'full') {
                    cost += 150;
                }
                
                // Округление и отображение результатов
                estimatedCost.textContent = Math.round(cost);
                estimatedTime.textContent = time;
                
                // Показ результатов
                calculationResult.style.display = 'block';
                
                // Прокрутка к результатам
                calculationResult.scrollIntoView({ behavior: 'smooth' });
            });
            
            // Функция для оценки расстояния (в реальном проекте будет использоваться API)
            function estimateDistance(origin, destination) {
                // Очень упрощенная оценка расстояния для демонстрации
                const cities = {
                    'таллинн': { lat: 59.4370, lng: 24.7536 },
                    'рига': { lat: 56.9496, lng: 24.1052 },
                    'вильнюс': { lat: 54.6872, lng: 25.2797 },
                    'варшава': { lat: 52.2297, lng: 21.0122 },
                    'берлин': { lat: 52.5200, lng: 13.4050 },
                    'париж': { lat: 48.8566, lng: 2.3522 },
                    'мадрид': { lat: 40.4168, lng: -3.7038 },
                    'рим': { lat: 41.9028, lng: 12.4964 },
                    'лондон': { lat: 51.5074, lng: -0.1278 },
                    'вена': { lat: 48.2082, lng: 16.3738 },
                    'прага': { lat: 50.0755, lng: 14.4378 },
                    'будапешт': { lat: 47.4979, lng: 19.0402 },
                    'хельсинки': { lat: 60.1699, lng: 24.9384 },
                    'стокгольм': { lat: 59.3293, lng: 18.0686 },
                    'осло': { lat: 59.9139, lng: 10.7522 },
                    'копенгаген': { lat: 55.6761, lng: 12.5683 },
                    'амстердам': { lat: 52.3676, lng: 4.9041 },
                    'брюссель': { lat: 50.8503, lng: 4.3517 },
                    'цюрих': { lat: 47.3769, lng: 8.5417 },
                    'милан': { lat: 45.4642, lng: 9.1900 }
                };
                
                // Извлекаем название города из строки (берем первое слово и приводим к нижнему регистру)
                const originCity = origin.split(',')[0].toLowerCase();
                const destCity = destination.split(',')[0].toLowerCase();
                
                // Если города есть в нашем списке, вычисляем расстояние
                if (cities[originCity] && cities[destCity]) {
                    return calculateDistance(
                        cities[originCity].lat, cities[originCity].lng,
                        cities[destCity].lat, cities[destCity].lng
                    );
                }
                
                // Если городов нет в списке, возвращаем случайное расстояние от 500 до 2500 км
                return Math.floor(Math.random() * (2500 - 500 + 1)) + 500;
            }
            
            // Функция для расчета расстояния между двумя точками (формула гаверсинуса)
            function calculateDistance(lat1, lon1, lat2, lon2) {
                const R = 6371; // Радиус Земли в км
                const dLat = deg2rad(lat2 - lat1);
                const dLon = deg2rad(lon2 - lon1);
                const a = 
                    Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
                    Math.sin(dLon/2) * Math.sin(dLon/2); 
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
                const distance = R * c; // Расстояние в км
                return Math.round(distance);
            }
            
            function deg2rad(deg) {
                return deg * (Math.PI/180);
            }
        });
    </script>
</body>
</html>
